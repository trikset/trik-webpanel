language: minimal
os: linux
addons:
  apt:
    packages:
      - realpath
git:
  depth: 1
env:
  global:
    - scversion=latest
install:
  - wget -qO- "https://storage.googleapis.com/shellcheck/shellcheck-${scversion?}.linux.x86_64.tar.xz" | tar -xJv
script:
  - export PATH=$(realpath "shellcheck-${scversion}"):$PATH
  - shellcheck --version
  - shellcheck --help || true
#TODO: 
# 1. add `-s sh`
# 2. remove `-e 2154` and other disabled warnings
# 3. add `-o all`
# 4. change to `-S style`

  - 'find . -executable -type f  -not -path "./.git*" | xargs shellcheck -S style -W 20 -f gcc --color=always'
